
var CatalogDisplayTree=jsloader.resolve("freequery.catalogdisplay.CatalogDisplayTree");var FlatCatalogTreeNode=jsloader.resolve("freequery.tree.FlatCatalogTreeNode");var Level1CatalogTreeNode=jsloader.resolve("freequery.tree.Level1CatalogTreeNode");var FlatCatalogDisplayTree=function(parent){FlatCatalogDisplayTree.superclass.constructor.call(this,parent);this.currentLevel1Node=null;this.CSS_TEXTSPAN="flat-tree-textSpan";this.CSS_TEXTSPAN_SELECTED="flat-tree-textSpan-selected";this.CSS_NODEDIV_SELECTED="tree_nodediv_Selected";this.LEVEL1_CSS_TEXTSPAN="flat-level1-tree-textSpan";this.LEVEL1_CSS_TEXTSPAN_SELECTED="flat-level1-tree-textSpan-selected";};lang.extend(FlatCatalogDisplayTree,CatalogDisplayTree);FlatCatalogDisplayTree.CSS_TEXTSPAN="flat-level1-tree-textSpan";FlatCatalogDisplayTree.CSS_TEXTSPAN_SELECTED="flat-level1-tree-textSpan-selected";FlatCatalogDisplayTree.prototype.render=function(rootNodeId){FlatCatalogDisplayTree.superclass.render.call(this,rootNodeId);this.rootPane.setAttribute('bofClassName','freequery.catalogdisplay.FlatCatalogDisplayTree');};FlatCatalogDisplayTree.prototype.createTreeNode=function(text,level,mayHasChild,parent,id){if(level==0){var node=new Level1CatalogTreeNode(text,level,mayHasChild,parent,id);node.nodePane.cellPadding="0";return node;}
return new FlatCatalogTreeNode(text,level,mayHasChild,parent,id);};FlatCatalogDisplayTree.prototype.selectNodeWithoutFire=function(node,notFocus){if(!this.isRightButton){if(this.currentLevel1TreeNode&&!node._hasChild){domutils.replaceClassName(this.currentLevel1TreeNode.textSpan,this.LEVEL1_CSS_TEXTSPAN,this.LEVEL1_CSS_TEXTSPAN_SELECTED);}
if(this.selectedLeafNode){if(this.selectedLeafNode.level===0){domutils.replaceClassName(this.selectedLeafNode.textSpan,this.LEVEL1_CSS_TEXTSPAN,this.LEVEL1_CSS_TEXTSPAN_SELECTED);}else if(!node._hasChild){domutils.replaceClassName(this.selectedLeafNode.textSpan,this.CSS_TEXTSPAN,this.CSS_TEXTSPAN_SELECTED);domutils.removeClassName(this.selectedLeafNode.nodePane,this.CSS_NODEDIV_SELECTED);}}}
if(node){this.selectedNode=node;if(!node._hasChild){this.selectedLeafNode=node;}
if(!this.isRightButton){if(node.level===0){domutils.replaceClassName(node.textSpan,this.LEVEL1_CSS_TEXTSPAN_SELECTED,this.LEVEL1_CSS_TEXTSPAN);this.currentLevel1TreeNode=node;}else if(!node._hasChild){domutils.replaceClassName(node.textSpan,this.CSS_TEXTSPAN_SELECTED,this.CSS_TEXTSPAN);domutils.addClassName(node.nodePane,this.CSS_NODEDIV_SELECTED);}else{node.setExpanded(true);}
if(!notFocus&&this.selectedNode){this.scrollIntoView(this.selectedNode);try{this.selectedNode.hiddenLink.focus();}catch(ex){}}}}};