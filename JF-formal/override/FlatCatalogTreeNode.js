
var CatalogTreeNode=jsloader.resolve("freequery.tree.CatalogTreeNode");var FlatCatalogTreeNode=function(text,level,mayHasChild,parent,id){FlatCatalogTreeNode.superclass.constructor.call(this,text,level,mayHasChild,parent,id);if(domutils.isIE()){this.addListener(this.textSpan,"mouseover",this.doOnTreeNodeMouseOver,this);this.addListener(this.textSpan,"mouseout",this.doOnTreeNodeMouseOut,this);this.textSpan.style.cursor="pointer";}else{this.addListener(this.hiddenLink,"mouseover",this.doOnTreeNodeMouseOver,this);this.addListener(this.hiddenLink,"mouseout",this.doOnTreeNodeMouseOut,this);this.hiddenLink.style.color="";this.hiddenLink.style.cursor="pointer";}
domutils.removeClassName(this.textSpan,"tree_textSpan");domutils.addClassName(this.textSpan,"flat-tree-textSpan");};lang.extend(FlatCatalogTreeNode,CatalogTreeNode);FlatCatalogTreeNode.prototype.doOnTreeNodeMouseOver=function(e){};FlatCatalogTreeNode.prototype.doOnTreeNodeMouseOut=function(e){};FlatCatalogTreeNode.prototype.isHiddenNode=function(catalog){var _showOnPC=catalog.showOnPC;if(catalog.extended==""||(catalog.extended&&catalog.extended.indexOf("showOnPC")==-1)){_showOnPC=true;}
if(_showOnPC!=undefined&&!_showOnPC){return true;}
return FlatCatalogTreeNode.superclass.isHiddenNode.call(this,catalog);}
FlatCatalogTreeNode.prototype.doOnMouseDown=function(e,target){var button=domutils.isIE()?e.button:e.buttons;var isRightButton=domutils.isRightButton(button);this.tree.isRightButton=isRightButton;if(button!==4&&!(e.ctrlKey&&button===1)){FlatCatalogTreeNode.superclass.doOnMouseDown.call(this,e,target);if(!this._hasChild&&!isRightButton){var treeNode=this;while(treeNode.level!=0){treeNode=treeNode.parentNode;}
this.tree.currentLevel1TreeNode=treeNode;domutils.removeClassName(treeNode.textSpan,"flat-level1-tree-textSpan");domutils.addClassName(treeNode.textSpan,"flat-level1-tree-textSpan-selected");this.tree.doCmd("OPEN");if(domutils.isFirefox()){domutils.stopEvent(e);}}}else{if(!this._hasChild){var url="openresource.jsp?resid="+this._id;url+="&refresh=true&browserType="+domutils.getBrowserType();window.open(url);}}};FlatCatalogTreeNode.prototype.destroy=function(){this.icon.onerror=null;FlatCatalogTreeNode.superclass.destroy.call(this);}